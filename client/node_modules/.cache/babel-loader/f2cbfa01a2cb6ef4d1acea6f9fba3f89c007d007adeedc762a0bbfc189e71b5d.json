{"ast":null,"code":"\"use strict\";\n\n/**\n * @packageDocumentation\n * @module Voice\n * @internalapi\n */\n// @ts-nocheck\n// tslint:disable only-arrow-functions\n/* global webkitRTCPeerConnection, mozRTCPeerConnection, mozRTCSessionDescription, mozRTCIceCandidate */\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar log_1 = require(\"../log\");\nvar util = require(\"../util\");\nvar sdp_1 = require(\"./sdp\");\nvar RTCPeerConnectionShim = require('rtcpeerconnection-shim');\nfunction RTCPC(options) {\n  if (typeof window === 'undefined') {\n    this.log.info('No RTCPeerConnection implementation available. The window object was not found.');\n    return;\n  }\n  if (options && options.RTCPeerConnection) {\n    this.RTCPeerConnection = options.RTCPeerConnection;\n  } else if (util.isLegacyEdge()) {\n    this.RTCPeerConnection = new RTCPeerConnectionShim(typeof window !== 'undefined' ? window : global);\n  } else if (typeof window.RTCPeerConnection === 'function') {\n    this.RTCPeerConnection = window.RTCPeerConnection;\n  } else if (typeof window.webkitRTCPeerConnection === 'function') {\n    this.RTCPeerConnection = webkitRTCPeerConnection;\n  } else if (typeof window.mozRTCPeerConnection === 'function') {\n    this.RTCPeerConnection = mozRTCPeerConnection;\n    window.RTCSessionDescription = mozRTCSessionDescription;\n    window.RTCIceCandidate = mozRTCIceCandidate;\n  } else {\n    this.log.info('No RTCPeerConnection implementation available');\n  }\n}\nRTCPC.prototype.create = function (rtcConstraints, rtcConfiguration) {\n  this.log = log_1.default.getInstance();\n  this.pc = new this.RTCPeerConnection(rtcConfiguration, rtcConstraints);\n};\nRTCPC.prototype.createModernConstraints = function (c) {\n  // createOffer differs between Chrome 23 and Chrome 24+.\n  // See https://groups.google.com/forum/?fromgroups=#!topic/discuss-webrtc/JBDZtrMumyU\n  // Unfortunately I haven't figured out a way to detect which format\n  // is required ahead of time, so we'll first try the old way, and\n  // if we get an exception, then we'll try the new way.\n  if (typeof c === 'undefined') {\n    return null;\n  }\n  // NOTE(mroberts): As of Chrome 38, Chrome still appears to expect\n  // constraints under the 'mandatory' key, and with the first letter of each\n  // constraint capitalized. Firefox, on the other hand, has deprecated the\n  // 'mandatory' key and does not expect the first letter of each constraint\n  // capitalized.\n  var nc = Object.assign({}, c);\n  if (typeof webkitRTCPeerConnection !== 'undefined' && !util.isLegacyEdge()) {\n    nc.mandatory = {};\n    if (typeof c.audio !== 'undefined') {\n      nc.mandatory.OfferToReceiveAudio = c.audio;\n    }\n    if (typeof c.video !== 'undefined') {\n      nc.mandatory.OfferToReceiveVideo = c.video;\n    }\n  } else {\n    if (typeof c.audio !== 'undefined') {\n      nc.offerToReceiveAudio = c.audio;\n    }\n    if (typeof c.video !== 'undefined') {\n      nc.offerToReceiveVideo = c.video;\n    }\n  }\n  delete nc.audio;\n  delete nc.video;\n  return nc;\n};\nRTCPC.prototype.createOffer = function (maxAverageBitrate, codecPreferences, constraints, onSuccess, onError) {\n  var _this = this;\n  constraints = this.createModernConstraints(constraints);\n  return promisifyCreate(this.pc.createOffer, this.pc)(constraints).then(function (offer) {\n    if (!_this.pc) {\n      return Promise.resolve();\n    }\n    var sdp = sdp_1.setMaxAverageBitrate(offer.sdp, maxAverageBitrate);\n    return promisifySet(_this.pc.setLocalDescription, _this.pc)(new RTCSessionDescription({\n      sdp: sdp_1.setCodecPreferences(sdp, codecPreferences),\n      type: 'offer'\n    }));\n  }).then(onSuccess, onError);\n};\nRTCPC.prototype.createAnswer = function (maxAverageBitrate, codecPreferences, constraints, onSuccess, onError) {\n  var _this = this;\n  constraints = this.createModernConstraints(constraints);\n  return promisifyCreate(this.pc.createAnswer, this.pc)(constraints).then(function (answer) {\n    if (!_this.pc) {\n      return Promise.resolve();\n    }\n    var sdp = sdp_1.setMaxAverageBitrate(answer.sdp, maxAverageBitrate);\n    return promisifySet(_this.pc.setLocalDescription, _this.pc)(new RTCSessionDescription({\n      sdp: sdp_1.setCodecPreferences(sdp, codecPreferences),\n      type: 'answer'\n    }));\n  }).then(onSuccess, onError);\n};\nRTCPC.prototype.processSDP = function (maxAverageBitrate, codecPreferences, sdp, constraints, onSuccess, onError) {\n  var _this = this;\n  sdp = sdp_1.setCodecPreferences(sdp, codecPreferences);\n  var desc = new RTCSessionDescription({\n    sdp: sdp,\n    type: 'offer'\n  });\n  return promisifySet(this.pc.setRemoteDescription, this.pc)(desc).then(function () {\n    _this.createAnswer(maxAverageBitrate, codecPreferences, constraints, onSuccess, onError);\n  });\n};\nRTCPC.prototype.getSDP = function () {\n  return this.pc.localDescription.sdp;\n};\nRTCPC.prototype.processAnswer = function (codecPreferences, sdp, onSuccess, onError) {\n  if (!this.pc) {\n    return Promise.resolve();\n  }\n  sdp = sdp_1.setCodecPreferences(sdp, codecPreferences);\n  return promisifySet(this.pc.setRemoteDescription, this.pc)(new RTCSessionDescription({\n    sdp: sdp,\n    type: 'answer'\n  })).then(onSuccess, onError);\n};\n/* NOTE(mroberts): Firefox 18 through 21 include a `mozRTCPeerConnection`\n   object, but attempting to instantiate it will throw the error\n\n       Error: PeerConnection not enabled (did you set the pref?)\n\n   unless the `media.peerconnection.enabled` pref is enabled. So we need to test\n   if we can actually instantiate `mozRTCPeerConnection`; however, if the user\n   *has* enabled `media.peerconnection.enabled`, we need to perform the same\n   test that we use to detect Firefox 24 and above, namely:\n\n       typeof (new mozRTCPeerConnection()).getLocalStreams === 'function'\n\n    NOTE(rrowland): We no longer support Legacy Edge as of Sep 1, 2020.\n*/\nRTCPC.test = function () {\n  if (typeof navigator === 'object') {\n    var getUserMedia = navigator.mediaDevices && navigator.mediaDevices.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.getUserMedia;\n    if (util.isLegacyEdge(navigator)) {\n      return false;\n    }\n    if (getUserMedia && typeof window.RTCPeerConnection === 'function') {\n      return true;\n    } else if (getUserMedia && typeof window.webkitRTCPeerConnection === 'function') {\n      return true;\n    } else if (getUserMedia && typeof window.mozRTCPeerConnection === 'function') {\n      try {\n        var test_1 = new window.mozRTCPeerConnection();\n        if (typeof test_1.getLocalStreams !== 'function') {\n          return false;\n        }\n      } catch (e) {\n        return false;\n      }\n      return true;\n    } else if (typeof RTCIceGatherer !== 'undefined') {\n      return true;\n    }\n  }\n  return false;\n};\nfunction promisify(fn, ctx, areCallbacksFirst, checkRval) {\n  return function () {\n    var args = Array.prototype.slice.call(arguments);\n    return new Promise(function (resolve) {\n      var returnValue = fn.apply(ctx, args);\n      if (!checkRval) {\n        resolve(returnValue);\n        return;\n      }\n      if (typeof returnValue === 'object' && typeof returnValue.then === 'function') {\n        resolve(returnValue);\n      } else {\n        throw new Error();\n      }\n    }).catch(function () {\n      return new Promise(function (resolve, reject) {\n        fn.apply(ctx, areCallbacksFirst ? [resolve, reject].concat(args) : args.concat([resolve, reject]));\n      });\n    });\n  };\n}\nfunction promisifyCreate(fn, ctx) {\n  return promisify(fn, ctx, true, true);\n}\nfunction promisifySet(fn, ctx) {\n  return promisify(fn, ctx, false, false);\n}\nexports.default = RTCPC;","map":{"version":3,"names":["log_1","require","util","sdp_1","RTCPeerConnectionShim","RTCPC","options","window","log","info","RTCPeerConnection","isLegacyEdge","global","webkitRTCPeerConnection","mozRTCPeerConnection","RTCSessionDescription","mozRTCSessionDescription","RTCIceCandidate","mozRTCIceCandidate","prototype","create","rtcConstraints","rtcConfiguration","default","getInstance","pc","createModernConstraints","c","nc","Object","assign","mandatory","audio","OfferToReceiveAudio","video","OfferToReceiveVideo","offerToReceiveAudio","offerToReceiveVideo","createOffer","maxAverageBitrate","codecPreferences","constraints","onSuccess","onError","_this","promisifyCreate","then","offer","Promise","resolve","sdp","setMaxAverageBitrate","promisifySet","setLocalDescription","setCodecPreferences","type","createAnswer","answer","processSDP","desc","setRemoteDescription","getSDP","localDescription","processAnswer","test","navigator","getUserMedia","mediaDevices","webkitGetUserMedia","mozGetUserMedia","test_1","getLocalStreams","e","RTCIceGatherer","promisify","fn","ctx","areCallbacksFirst","checkRval","args","Array","slice","call","arguments","returnValue","apply","Error","catch","reject","concat","exports"],"sources":["/home/swastikksi/Documents/react/twilio-Ksolves/node_modules/@twilio/voice-sdk/lib/twilio/rtc/rtcpc.ts"],"sourcesContent":["/**\n * @packageDocumentation\n * @module Voice\n * @internalapi\n */\n// @ts-nocheck\n// tslint:disable only-arrow-functions\n/* global webkitRTCPeerConnection, mozRTCPeerConnection, mozRTCSessionDescription, mozRTCIceCandidate */\n\nimport Log from '../log';\nimport * as util from '../util';\nimport { setCodecPreferences, setMaxAverageBitrate } from './sdp';\n\nconst RTCPeerConnectionShim = require('rtcpeerconnection-shim');\n\nfunction RTCPC(options) {\n  if (typeof window === 'undefined') {\n    this.log.info('No RTCPeerConnection implementation available. The window object was not found.');\n    return;\n  }\n\n  if (options && options.RTCPeerConnection) {\n    this.RTCPeerConnection = options.RTCPeerConnection;\n  } else if (util.isLegacyEdge()) {\n    this.RTCPeerConnection = new RTCPeerConnectionShim(typeof window !== 'undefined' ? window : global);\n  } else if (typeof window.RTCPeerConnection === 'function') {\n    this.RTCPeerConnection = window.RTCPeerConnection;\n  } else if (typeof window.webkitRTCPeerConnection === 'function') {\n    this.RTCPeerConnection = webkitRTCPeerConnection;\n  } else if (typeof window.mozRTCPeerConnection === 'function') {\n    this.RTCPeerConnection = mozRTCPeerConnection;\n    window.RTCSessionDescription = mozRTCSessionDescription;\n    window.RTCIceCandidate = mozRTCIceCandidate;\n  } else {\n    this.log.info('No RTCPeerConnection implementation available');\n  }\n}\n\nRTCPC.prototype.create = function(rtcConstraints, rtcConfiguration) {\n  this.log = Log.getInstance();\n  this.pc = new this.RTCPeerConnection(rtcConfiguration, rtcConstraints);\n};\nRTCPC.prototype.createModernConstraints = c => {\n  // createOffer differs between Chrome 23 and Chrome 24+.\n  // See https://groups.google.com/forum/?fromgroups=#!topic/discuss-webrtc/JBDZtrMumyU\n  // Unfortunately I haven't figured out a way to detect which format\n  // is required ahead of time, so we'll first try the old way, and\n  // if we get an exception, then we'll try the new way.\n  if (typeof c === 'undefined') {\n    return null;\n  }\n  // NOTE(mroberts): As of Chrome 38, Chrome still appears to expect\n  // constraints under the 'mandatory' key, and with the first letter of each\n  // constraint capitalized. Firefox, on the other hand, has deprecated the\n  // 'mandatory' key and does not expect the first letter of each constraint\n  // capitalized.\n  const nc = Object.assign({}, c);\n  if (typeof webkitRTCPeerConnection !== 'undefined' && !util.isLegacyEdge()) {\n    nc.mandatory = {};\n    if (typeof c.audio !== 'undefined') {\n      nc.mandatory.OfferToReceiveAudio = c.audio;\n    }\n    if (typeof c.video !== 'undefined') {\n      nc.mandatory.OfferToReceiveVideo = c.video;\n    }\n  } else {\n    if (typeof c.audio !== 'undefined') {\n      nc.offerToReceiveAudio = c.audio;\n    }\n    if (typeof c.video !== 'undefined') {\n      nc.offerToReceiveVideo = c.video;\n    }\n  }\n\n  delete nc.audio;\n  delete nc.video;\n\n  return nc;\n};\nRTCPC.prototype.createOffer = function(maxAverageBitrate, codecPreferences, constraints, onSuccess, onError) {\n  constraints = this.createModernConstraints(constraints);\n  return promisifyCreate(this.pc.createOffer, this.pc)(constraints).then(offer => {\n    if (!this.pc) { return Promise.resolve(); }\n\n    const sdp = setMaxAverageBitrate(offer.sdp, maxAverageBitrate);\n\n    return promisifySet(this.pc.setLocalDescription, this.pc)(new RTCSessionDescription({\n      sdp: setCodecPreferences(sdp, codecPreferences),\n      type: 'offer',\n    }));\n  }).then(onSuccess, onError);\n};\nRTCPC.prototype.createAnswer = function(maxAverageBitrate, codecPreferences, constraints, onSuccess, onError) {\n  constraints = this.createModernConstraints(constraints);\n  return promisifyCreate(this.pc.createAnswer, this.pc)(constraints).then(answer => {\n    if (!this.pc) { return Promise.resolve(); }\n    const sdp = setMaxAverageBitrate(answer.sdp, maxAverageBitrate);\n\n    return promisifySet(this.pc.setLocalDescription, this.pc)(new RTCSessionDescription({\n      sdp: setCodecPreferences(sdp, codecPreferences),\n      type: 'answer',\n    }));\n  }).then(onSuccess, onError);\n};\nRTCPC.prototype.processSDP = function(maxAverageBitrate, codecPreferences, sdp, constraints, onSuccess, onError) {\n  sdp = setCodecPreferences(sdp, codecPreferences);\n  const desc = new RTCSessionDescription({ sdp, type: 'offer' });\n  return promisifySet(this.pc.setRemoteDescription, this.pc)(desc).then(() => {\n    this.createAnswer(maxAverageBitrate, codecPreferences, constraints, onSuccess, onError);\n  });\n};\nRTCPC.prototype.getSDP = function() {\n  return this.pc.localDescription.sdp;\n};\nRTCPC.prototype.processAnswer = function(codecPreferences, sdp, onSuccess, onError) {\n  if (!this.pc) { return Promise.resolve(); }\n  sdp = setCodecPreferences(sdp, codecPreferences);\n\n  return promisifySet(this.pc.setRemoteDescription, this.pc)(\n    new RTCSessionDescription({ sdp, type: 'answer' }),\n  ).then(onSuccess, onError);\n};\n/* NOTE(mroberts): Firefox 18 through 21 include a `mozRTCPeerConnection`\n   object, but attempting to instantiate it will throw the error\n\n       Error: PeerConnection not enabled (did you set the pref?)\n\n   unless the `media.peerconnection.enabled` pref is enabled. So we need to test\n   if we can actually instantiate `mozRTCPeerConnection`; however, if the user\n   *has* enabled `media.peerconnection.enabled`, we need to perform the same\n   test that we use to detect Firefox 24 and above, namely:\n\n       typeof (new mozRTCPeerConnection()).getLocalStreams === 'function'\n\n    NOTE(rrowland): We no longer support Legacy Edge as of Sep 1, 2020.\n*/\nRTCPC.test = () => {\n  if (typeof navigator === 'object') {\n    const getUserMedia = (navigator.mediaDevices && navigator.mediaDevices.getUserMedia)\n      || navigator.webkitGetUserMedia\n      || navigator.mozGetUserMedia\n      || navigator.getUserMedia;\n\n    if (util.isLegacyEdge(navigator)) {\n      return false;\n    }\n\n    if (getUserMedia && typeof window.RTCPeerConnection === 'function') {\n      return true;\n    } else if (getUserMedia && typeof window.webkitRTCPeerConnection === 'function') {\n      return true;\n    } else if (getUserMedia && typeof window.mozRTCPeerConnection === 'function') {\n      try {\n        const test = new window.mozRTCPeerConnection();\n        if (typeof test.getLocalStreams !== 'function') {\n          return false;\n        }\n      } catch (e) {\n        return false;\n      }\n      return true;\n    } else if (typeof RTCIceGatherer !== 'undefined') {\n      return true;\n    }\n  }\n\n  return false;\n};\n\nfunction promisify(fn, ctx, areCallbacksFirst, checkRval) {\n  return function() {\n    const args = Array.prototype.slice.call(arguments);\n\n    return new Promise(resolve => {\n      const returnValue = fn.apply(ctx, args);\n      if (!checkRval) {\n        resolve(returnValue);\n        return;\n      }\n      if (typeof returnValue === 'object' && typeof returnValue.then === 'function') {\n        resolve(returnValue);\n      } else {\n        throw new Error();\n      }\n    }).catch(() => new Promise((resolve, reject) => {\n      fn.apply(ctx, areCallbacksFirst\n        ? [resolve, reject].concat(args)\n        : args.concat([resolve, reject]));\n    }));\n  };\n}\n\nfunction promisifyCreate(fn, ctx) {\n  return promisify(fn, ctx, true, true);\n}\n\nfunction promisifySet(fn, ctx) {\n  return promisify(fn, ctx, false, false);\n}\n\nexport default RTCPC;\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}