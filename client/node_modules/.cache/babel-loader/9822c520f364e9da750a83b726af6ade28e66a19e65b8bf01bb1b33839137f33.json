{"ast":null,"code":"\"use strict\";\n\nvar _regenerator = require(\"babel-runtime/regenerator\");\nvar _regenerator2 = _interopRequireDefault(_regenerator);\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\nvar __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : new P(function (resolve) {\n        resolve(result.value);\n      }).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar Deferred_1 = require(\"./Deferred\");\nvar EventTarget_1 = require(\"./EventTarget\");\n/**\n * An {@link AudioPlayer} is an HTMLAudioElement-like object that uses AudioContext\n *   to circumvent browser limitations.\n */\n\nvar AudioPlayer = function (_EventTarget_1$defaul) {\n  _inherits(AudioPlayer, _EventTarget_1$defaul);\n\n  /**\n   * @private\n   */\n  function AudioPlayer(audioContext) {\n    var srcOrOptions = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    _classCallCheck(this, AudioPlayer);\n\n    /**\n     * The AudioBufferSourceNode of the actively loaded sound. Null if a sound\n     *   has not been loaded yet. This is re-used for each time the sound is\n     *   played.\n     */\n    var _this = _possibleConstructorReturn(this, (AudioPlayer.__proto__ || Object.getPrototypeOf(AudioPlayer)).call(this));\n    _this._audioNode = null;\n    /**\n     * An Array of deferred-like objects for each pending `play` Promise. When\n     *   .pause() is called or .src is set, all pending play Promises are\n     *   immediately rejected.\n     */\n    _this._pendingPlayDeferreds = [];\n    /**\n     * Whether or not the audio element should loop. If disabled during playback,\n     *   playing continues until the sound ends and then stops looping.\n     */\n    _this._loop = false;\n    /**\n     * The source URL of the sound to play. When set, the currently playing sound will stop.\n     */\n    _this._src = '';\n    /**\n     * The current sinkId of the device audio is being played through.\n     */\n    _this._sinkId = 'default';\n    if (typeof srcOrOptions !== 'string') {\n      options = srcOrOptions;\n    }\n    _this._audioContext = audioContext;\n    _this._audioElement = new (options.AudioFactory || Audio)();\n    _this._bufferPromise = _this._createPlayDeferred().promise;\n    _this._destination = _this._audioContext.destination;\n    _this._gainNode = _this._audioContext.createGain();\n    _this._gainNode.connect(_this._destination);\n    _this._XMLHttpRequest = options.XMLHttpRequestFactory || XMLHttpRequest;\n    _this.addEventListener('canplaythrough', function () {\n      _this._resolvePlayDeferreds();\n    });\n    if (typeof srcOrOptions === 'string') {\n      _this.src = srcOrOptions;\n    }\n    return _this;\n  }\n  _createClass(AudioPlayer, [{\n    key: \"load\",\n    /**\n     * Stop any ongoing playback and reload the source file.\n     */\n    value: function load() {\n      this._load(this._src);\n    }\n    /**\n     * Pause the audio coming from this AudioPlayer. This will reject any pending\n     *   play Promises.\n     */\n  }, {\n    key: \"pause\",\n    value: function pause() {\n      if (this.paused) {\n        return;\n      }\n      this._audioElement.pause();\n      this._audioNode.stop();\n      this._audioNode.disconnect(this._gainNode);\n      this._audioNode = null;\n      this._rejectPlayDeferreds(new Error('The play() request was interrupted by a call to pause().'));\n    }\n    /**\n     * Play the sound. If the buffer hasn't loaded yet, wait for the buffer to load. If\n     *   the source URL is not set yet, this Promise will remain pending until a source\n     *   URL is set.\n     */\n  }, {\n    key: \"play\",\n    value: function play() {\n      return __awaiter(this, void 0, void 0, /*#__PURE__*/_regenerator2.default.mark(function _callee() {\n        var _this2 = this;\n        var buffer;\n        return _regenerator2.default.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (this.paused) {\n                  _context.next = 6;\n                  break;\n                }\n                _context.next = 3;\n                return this._bufferPromise;\n              case 3:\n                if (this.paused) {\n                  _context.next = 5;\n                  break;\n                }\n                return _context.abrupt(\"return\");\n              case 5:\n                throw new Error('The play() request was interrupted by a call to pause().');\n              case 6:\n                this._audioNode = this._audioContext.createBufferSource();\n                this._audioNode.loop = this.loop;\n                this._audioNode.addEventListener('ended', function () {\n                  if (_this2._audioNode && _this2._audioNode.loop) {\n                    return;\n                  }\n                  _this2.dispatchEvent('ended');\n                });\n                _context.next = 11;\n                return this._bufferPromise;\n              case 11:\n                buffer = _context.sent;\n                if (!this.paused) {\n                  _context.next = 14;\n                  break;\n                }\n                throw new Error('The play() request was interrupted by a call to pause().');\n              case 14:\n                this._audioNode.buffer = buffer;\n                this._audioNode.connect(this._gainNode);\n                this._audioNode.start();\n                if (!this._audioElement.srcObject) {\n                  _context.next = 19;\n                  break;\n                }\n                return _context.abrupt(\"return\", this._audioElement.play());\n              case 19:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n    }\n    /**\n     * Change which device the sound should play through.\n     * @param sinkId - The sink of the device to play sound through.\n     */\n  }, {\n    key: \"setSinkId\",\n    value: function setSinkId(sinkId) {\n      return __awaiter(this, void 0, void 0, /*#__PURE__*/_regenerator2.default.mark(function _callee2() {\n        return _regenerator2.default.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                if (!(typeof this._audioElement.setSinkId !== 'function')) {\n                  _context2.next = 2;\n                  break;\n                }\n                throw new Error('This browser does not support setSinkId.');\n              case 2:\n                if (!(sinkId === this.sinkId)) {\n                  _context2.next = 4;\n                  break;\n                }\n                return _context2.abrupt(\"return\");\n              case 4:\n                if (!(sinkId === 'default')) {\n                  _context2.next = 11;\n                  break;\n                }\n                if (!this.paused) {\n                  this._gainNode.disconnect(this._destination);\n                }\n                this._audioElement.srcObject = null;\n                this._destination = this._audioContext.destination;\n                this._gainNode.connect(this._destination);\n                this._sinkId = sinkId;\n                return _context2.abrupt(\"return\");\n              case 11:\n                _context2.next = 13;\n                return this._audioElement.setSinkId(sinkId);\n              case 13:\n                if (!this._audioElement.srcObject) {\n                  _context2.next = 15;\n                  break;\n                }\n                return _context2.abrupt(\"return\");\n              case 15:\n                this._gainNode.disconnect(this._audioContext.destination);\n                this._destination = this._audioContext.createMediaStreamDestination();\n                this._audioElement.srcObject = this._destination.stream;\n                this._sinkId = sinkId;\n                this._gainNode.connect(this._destination);\n              case 20:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n    }\n    /**\n     * Create a Deferred for a Promise that will be resolved when .src is set or rejected\n     *   when .pause is called.\n     */\n  }, {\n    key: \"_createPlayDeferred\",\n    value: function _createPlayDeferred() {\n      var deferred = new Deferred_1.default();\n      this._pendingPlayDeferreds.push(deferred);\n      return deferred;\n    }\n    /**\n     * Stop current playback and load a sound file.\n     * @param src - The source URL of the file to load\n     */\n  }, {\n    key: \"_load\",\n    value: function _load(src) {\n      var _this3 = this;\n      if (this._src && this._src !== src) {\n        this.pause();\n      }\n      this._src = src;\n      this._bufferPromise = new Promise(function (resolve, reject) {\n        return __awaiter(_this3, void 0, void 0, /*#__PURE__*/_regenerator2.default.mark(function _callee3() {\n          var buffer;\n          return _regenerator2.default.wrap(function _callee3$(_context3) {\n            while (1) {\n              switch (_context3.prev = _context3.next) {\n                case 0:\n                  if (src) {\n                    _context3.next = 2;\n                    break;\n                  }\n                  return _context3.abrupt(\"return\", this._createPlayDeferred().promise);\n                case 2:\n                  _context3.next = 4;\n                  return bufferSound(this._audioContext, this._XMLHttpRequest, src);\n                case 4:\n                  buffer = _context3.sent;\n                  this.dispatchEvent('canplaythrough');\n                  resolve(buffer);\n                case 7:\n                case \"end\":\n                  return _context3.stop();\n              }\n            }\n          }, _callee3, this);\n        }));\n      });\n    }\n    /**\n     * Reject all deferreds for the Play promise.\n     * @param reason\n     */\n  }, {\n    key: \"_rejectPlayDeferreds\",\n    value: function _rejectPlayDeferreds(reason) {\n      var deferreds = this._pendingPlayDeferreds;\n      deferreds.splice(0, deferreds.length).forEach(function (_ref) {\n        var reject = _ref.reject;\n        return reject(reason);\n      });\n    }\n    /**\n     * Resolve all deferreds for the Play promise.\n     * @param result\n     */\n  }, {\n    key: \"_resolvePlayDeferreds\",\n    value: function _resolvePlayDeferreds(result) {\n      var deferreds = this._pendingPlayDeferreds;\n      deferreds.splice(0, deferreds.length).forEach(function (_ref2) {\n        var resolve = _ref2.resolve;\n        return resolve(result);\n      });\n    }\n  }, {\n    key: \"destination\",\n    get: function get() {\n      return this._destination;\n    }\n  }, {\n    key: \"loop\",\n    get: function get() {\n      return this._loop;\n    },\n    set: function set(shouldLoop) {\n      // If a sound is already looping, it should continue playing\n      //   the current playthrough and then stop.\n      if (!shouldLoop && this.loop && !this.paused) {\n        var _pauseAfterPlaythrough = function _pauseAfterPlaythrough() {\n          self._audioNode.removeEventListener('ended', _pauseAfterPlaythrough);\n          self.pause();\n        };\n        var self = this;\n        this._audioNode.addEventListener('ended', _pauseAfterPlaythrough);\n      }\n      this._loop = shouldLoop;\n    }\n    /**\n     * Whether the audio element is muted.\n     */\n  }, {\n    key: \"muted\",\n    get: function get() {\n      return this._gainNode.gain.value === 0;\n    },\n    set: function set(shouldBeMuted) {\n      this._gainNode.gain.value = shouldBeMuted ? 0 : 1;\n    }\n    /**\n     * Whether the sound is paused. this._audioNode only exists when sound is playing;\n     *   otherwise AudioPlayer is considered paused.\n     */\n  }, {\n    key: \"paused\",\n    get: function get() {\n      return this._audioNode === null;\n    }\n  }, {\n    key: \"src\",\n    get: function get() {\n      return this._src;\n    },\n    set: function set(src) {\n      this._load(src);\n    }\n    /**\n     * The srcObject of the HTMLMediaElement\n     */\n  }, {\n    key: \"srcObject\",\n    get: function get() {\n      return this._audioElement.srcObject;\n    },\n    set: function set(srcObject) {\n      this._audioElement.srcObject = srcObject;\n    }\n  }, {\n    key: \"sinkId\",\n    get: function get() {\n      return this._sinkId;\n    }\n  }]);\n  return AudioPlayer;\n}(EventTarget_1.default);\nexports.default = AudioPlayer;\n/**\n * Use XMLHttpRequest to load the AudioBuffer of a remote audio asset.\n * @private\n * @param context - The AudioContext to use to decode the audio data\n * @param RequestFactory - The XMLHttpRequest factory to build\n * @param src - The URL of the audio asset to load.\n * @returns A Promise containing the decoded AudioBuffer.\n */\n// tslint:disable-next-line:variable-name\nfunction bufferSound(context, RequestFactory, src) {\n  return __awaiter(this, void 0, void 0, /*#__PURE__*/_regenerator2.default.mark(function _callee4() {\n    var request, event;\n    return _regenerator2.default.wrap(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            request = new RequestFactory();\n            request.open('GET', src, true);\n            request.responseType = 'arraybuffer';\n            _context4.next = 5;\n            return new Promise(function (resolve) {\n              request.addEventListener('load', resolve);\n              request.send();\n            });\n          case 5:\n            event = _context4.sent;\n            _context4.prev = 6;\n            return _context4.abrupt(\"return\", context.decodeAudioData(event.target.response));\n          case 10:\n            _context4.prev = 10;\n            _context4.t0 = _context4[\"catch\"](6);\n            return _context4.abrupt(\"return\", new Promise(function (resolve) {\n              context.decodeAudioData(event.target.response, resolve);\n            }));\n          case 13:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee4, this, [[6, 10]]);\n  }));\n}","map":{"version":3,"names":["_regenerator","require","_regenerator2","_interopRequireDefault","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","Constructor","protoProps","staticProps","prototype","obj","__esModule","default","_classCallCheck","instance","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","create","constructor","value","setPrototypeOf","__proto__","__awaiter","undefined","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","e","rejected","result","done","then","apply","exports","Deferred_1","EventTarget_1","AudioPlayer","_EventTarget_1$defaul","audioContext","srcOrOptions","arguments","options","_this","getPrototypeOf","_audioNode","_pendingPlayDeferreds","_loop","_src","_sinkId","_audioContext","_audioElement","AudioFactory","Audio","_bufferPromise","_createPlayDeferred","promise","_destination","destination","_gainNode","createGain","connect","_XMLHttpRequest","XMLHttpRequestFactory","XMLHttpRequest","addEventListener","_resolvePlayDeferreds","src","load","_load","pause","paused","stop","disconnect","_rejectPlayDeferreds","Error","play","mark","_callee","_this2","buffer","wrap","_callee$","_context","prev","abrupt","createBufferSource","loop","dispatchEvent","sent","start","srcObject","setSinkId","sinkId","_callee2","_callee2$","_context2","createMediaStreamDestination","stream","deferred","push","_this3","_callee3","_callee3$","_context3","bufferSound","reason","deferreds","splice","forEach","_ref","_ref2","get","set","shouldLoop","_pauseAfterPlaythrough","removeEventListener","gain","shouldBeMuted","context","RequestFactory","_callee4","request","event","_callee4$","_context4","open","responseType","send","decodeAudioData","response","t0"],"sources":["/home/swastikksi/Documents/react/twilio-Ksolves/node_modules/@twilio/audioplayer/es5/AudioPlayer.js"],"sourcesContent":["\"use strict\";\n\nvar _regenerator = require(\"babel-runtime/regenerator\");\n\nvar _regenerator2 = _interopRequireDefault(_regenerator);\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) {\n            try {\n                step(generator.next(value));\n            } catch (e) {\n                reject(e);\n            }\n        }\n        function rejected(value) {\n            try {\n                step(generator[\"throw\"](value));\n            } catch (e) {\n                reject(e);\n            }\n        }\n        function step(result) {\n            result.done ? resolve(result.value) : new P(function (resolve) {\n                resolve(result.value);\n            }).then(fulfilled, rejected);\n        }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Deferred_1 = require(\"./Deferred\");\nvar EventTarget_1 = require(\"./EventTarget\");\n/**\n * An {@link AudioPlayer} is an HTMLAudioElement-like object that uses AudioContext\n *   to circumvent browser limitations.\n */\n\nvar AudioPlayer = function (_EventTarget_1$defaul) {\n    _inherits(AudioPlayer, _EventTarget_1$defaul);\n\n    /**\n     * @private\n     */\n    function AudioPlayer(audioContext) {\n        var srcOrOptions = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n        var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n        _classCallCheck(this, AudioPlayer);\n\n        /**\n         * The AudioBufferSourceNode of the actively loaded sound. Null if a sound\n         *   has not been loaded yet. This is re-used for each time the sound is\n         *   played.\n         */\n        var _this = _possibleConstructorReturn(this, (AudioPlayer.__proto__ || Object.getPrototypeOf(AudioPlayer)).call(this));\n\n        _this._audioNode = null;\n        /**\n         * An Array of deferred-like objects for each pending `play` Promise. When\n         *   .pause() is called or .src is set, all pending play Promises are\n         *   immediately rejected.\n         */\n        _this._pendingPlayDeferreds = [];\n        /**\n         * Whether or not the audio element should loop. If disabled during playback,\n         *   playing continues until the sound ends and then stops looping.\n         */\n        _this._loop = false;\n        /**\n         * The source URL of the sound to play. When set, the currently playing sound will stop.\n         */\n        _this._src = '';\n        /**\n         * The current sinkId of the device audio is being played through.\n         */\n        _this._sinkId = 'default';\n        if (typeof srcOrOptions !== 'string') {\n            options = srcOrOptions;\n        }\n        _this._audioContext = audioContext;\n        _this._audioElement = new (options.AudioFactory || Audio)();\n        _this._bufferPromise = _this._createPlayDeferred().promise;\n        _this._destination = _this._audioContext.destination;\n        _this._gainNode = _this._audioContext.createGain();\n        _this._gainNode.connect(_this._destination);\n        _this._XMLHttpRequest = options.XMLHttpRequestFactory || XMLHttpRequest;\n        _this.addEventListener('canplaythrough', function () {\n            _this._resolvePlayDeferreds();\n        });\n        if (typeof srcOrOptions === 'string') {\n            _this.src = srcOrOptions;\n        }\n        return _this;\n    }\n\n    _createClass(AudioPlayer, [{\n        key: \"load\",\n\n        /**\n         * Stop any ongoing playback and reload the source file.\n         */\n        value: function load() {\n            this._load(this._src);\n        }\n        /**\n         * Pause the audio coming from this AudioPlayer. This will reject any pending\n         *   play Promises.\n         */\n\n    }, {\n        key: \"pause\",\n        value: function pause() {\n            if (this.paused) {\n                return;\n            }\n            this._audioElement.pause();\n            this._audioNode.stop();\n            this._audioNode.disconnect(this._gainNode);\n            this._audioNode = null;\n            this._rejectPlayDeferreds(new Error('The play() request was interrupted by a call to pause().'));\n        }\n        /**\n         * Play the sound. If the buffer hasn't loaded yet, wait for the buffer to load. If\n         *   the source URL is not set yet, this Promise will remain pending until a source\n         *   URL is set.\n         */\n\n    }, {\n        key: \"play\",\n        value: function play() {\n            return __awaiter(this, void 0, void 0, /*#__PURE__*/_regenerator2.default.mark(function _callee() {\n                var _this2 = this;\n\n                var buffer;\n                return _regenerator2.default.wrap(function _callee$(_context) {\n                    while (1) {\n                        switch (_context.prev = _context.next) {\n                            case 0:\n                                if (this.paused) {\n                                    _context.next = 6;\n                                    break;\n                                }\n\n                                _context.next = 3;\n                                return this._bufferPromise;\n\n                            case 3:\n                                if (this.paused) {\n                                    _context.next = 5;\n                                    break;\n                                }\n\n                                return _context.abrupt(\"return\");\n\n                            case 5:\n                                throw new Error('The play() request was interrupted by a call to pause().');\n\n                            case 6:\n                                this._audioNode = this._audioContext.createBufferSource();\n                                this._audioNode.loop = this.loop;\n                                this._audioNode.addEventListener('ended', function () {\n                                    if (_this2._audioNode && _this2._audioNode.loop) {\n                                        return;\n                                    }\n                                    _this2.dispatchEvent('ended');\n                                });\n                                _context.next = 11;\n                                return this._bufferPromise;\n\n                            case 11:\n                                buffer = _context.sent;\n\n                                if (!this.paused) {\n                                    _context.next = 14;\n                                    break;\n                                }\n\n                                throw new Error('The play() request was interrupted by a call to pause().');\n\n                            case 14:\n                                this._audioNode.buffer = buffer;\n                                this._audioNode.connect(this._gainNode);\n                                this._audioNode.start();\n\n                                if (!this._audioElement.srcObject) {\n                                    _context.next = 19;\n                                    break;\n                                }\n\n                                return _context.abrupt(\"return\", this._audioElement.play());\n\n                            case 19:\n                            case \"end\":\n                                return _context.stop();\n                        }\n                    }\n                }, _callee, this);\n            }));\n        }\n        /**\n         * Change which device the sound should play through.\n         * @param sinkId - The sink of the device to play sound through.\n         */\n\n    }, {\n        key: \"setSinkId\",\n        value: function setSinkId(sinkId) {\n            return __awaiter(this, void 0, void 0, /*#__PURE__*/_regenerator2.default.mark(function _callee2() {\n                return _regenerator2.default.wrap(function _callee2$(_context2) {\n                    while (1) {\n                        switch (_context2.prev = _context2.next) {\n                            case 0:\n                                if (!(typeof this._audioElement.setSinkId !== 'function')) {\n                                    _context2.next = 2;\n                                    break;\n                                }\n\n                                throw new Error('This browser does not support setSinkId.');\n\n                            case 2:\n                                if (!(sinkId === this.sinkId)) {\n                                    _context2.next = 4;\n                                    break;\n                                }\n\n                                return _context2.abrupt(\"return\");\n\n                            case 4:\n                                if (!(sinkId === 'default')) {\n                                    _context2.next = 11;\n                                    break;\n                                }\n\n                                if (!this.paused) {\n                                    this._gainNode.disconnect(this._destination);\n                                }\n                                this._audioElement.srcObject = null;\n                                this._destination = this._audioContext.destination;\n                                this._gainNode.connect(this._destination);\n                                this._sinkId = sinkId;\n                                return _context2.abrupt(\"return\");\n\n                            case 11:\n                                _context2.next = 13;\n                                return this._audioElement.setSinkId(sinkId);\n\n                            case 13:\n                                if (!this._audioElement.srcObject) {\n                                    _context2.next = 15;\n                                    break;\n                                }\n\n                                return _context2.abrupt(\"return\");\n\n                            case 15:\n                                this._gainNode.disconnect(this._audioContext.destination);\n                                this._destination = this._audioContext.createMediaStreamDestination();\n                                this._audioElement.srcObject = this._destination.stream;\n                                this._sinkId = sinkId;\n                                this._gainNode.connect(this._destination);\n\n                            case 20:\n                            case \"end\":\n                                return _context2.stop();\n                        }\n                    }\n                }, _callee2, this);\n            }));\n        }\n        /**\n         * Create a Deferred for a Promise that will be resolved when .src is set or rejected\n         *   when .pause is called.\n         */\n\n    }, {\n        key: \"_createPlayDeferred\",\n        value: function _createPlayDeferred() {\n            var deferred = new Deferred_1.default();\n            this._pendingPlayDeferreds.push(deferred);\n            return deferred;\n        }\n        /**\n         * Stop current playback and load a sound file.\n         * @param src - The source URL of the file to load\n         */\n\n    }, {\n        key: \"_load\",\n        value: function _load(src) {\n            var _this3 = this;\n\n            if (this._src && this._src !== src) {\n                this.pause();\n            }\n            this._src = src;\n            this._bufferPromise = new Promise(function (resolve, reject) {\n                return __awaiter(_this3, void 0, void 0, /*#__PURE__*/_regenerator2.default.mark(function _callee3() {\n                    var buffer;\n                    return _regenerator2.default.wrap(function _callee3$(_context3) {\n                        while (1) {\n                            switch (_context3.prev = _context3.next) {\n                                case 0:\n                                    if (src) {\n                                        _context3.next = 2;\n                                        break;\n                                    }\n\n                                    return _context3.abrupt(\"return\", this._createPlayDeferred().promise);\n\n                                case 2:\n                                    _context3.next = 4;\n                                    return bufferSound(this._audioContext, this._XMLHttpRequest, src);\n\n                                case 4:\n                                    buffer = _context3.sent;\n\n                                    this.dispatchEvent('canplaythrough');\n                                    resolve(buffer);\n\n                                case 7:\n                                case \"end\":\n                                    return _context3.stop();\n                            }\n                        }\n                    }, _callee3, this);\n                }));\n            });\n        }\n        /**\n         * Reject all deferreds for the Play promise.\n         * @param reason\n         */\n\n    }, {\n        key: \"_rejectPlayDeferreds\",\n        value: function _rejectPlayDeferreds(reason) {\n            var deferreds = this._pendingPlayDeferreds;\n            deferreds.splice(0, deferreds.length).forEach(function (_ref) {\n                var reject = _ref.reject;\n                return reject(reason);\n            });\n        }\n        /**\n         * Resolve all deferreds for the Play promise.\n         * @param result\n         */\n\n    }, {\n        key: \"_resolvePlayDeferreds\",\n        value: function _resolvePlayDeferreds(result) {\n            var deferreds = this._pendingPlayDeferreds;\n            deferreds.splice(0, deferreds.length).forEach(function (_ref2) {\n                var resolve = _ref2.resolve;\n                return resolve(result);\n            });\n        }\n    }, {\n        key: \"destination\",\n        get: function get() {\n            return this._destination;\n        }\n    }, {\n        key: \"loop\",\n        get: function get() {\n            return this._loop;\n        },\n        set: function set(shouldLoop) {\n            // If a sound is already looping, it should continue playing\n            //   the current playthrough and then stop.\n            if (!shouldLoop && this.loop && !this.paused) {\n                var _pauseAfterPlaythrough = function _pauseAfterPlaythrough() {\n                    self._audioNode.removeEventListener('ended', _pauseAfterPlaythrough);\n                    self.pause();\n                };\n\n                var self = this;\n\n                this._audioNode.addEventListener('ended', _pauseAfterPlaythrough);\n            }\n            this._loop = shouldLoop;\n        }\n        /**\n         * Whether the audio element is muted.\n         */\n\n    }, {\n        key: \"muted\",\n        get: function get() {\n            return this._gainNode.gain.value === 0;\n        },\n        set: function set(shouldBeMuted) {\n            this._gainNode.gain.value = shouldBeMuted ? 0 : 1;\n        }\n        /**\n         * Whether the sound is paused. this._audioNode only exists when sound is playing;\n         *   otherwise AudioPlayer is considered paused.\n         */\n\n    }, {\n        key: \"paused\",\n        get: function get() {\n            return this._audioNode === null;\n        }\n    }, {\n        key: \"src\",\n        get: function get() {\n            return this._src;\n        },\n        set: function set(src) {\n            this._load(src);\n        }\n        /**\n         * The srcObject of the HTMLMediaElement\n         */\n\n    }, {\n        key: \"srcObject\",\n        get: function get() {\n            return this._audioElement.srcObject;\n        },\n        set: function set(srcObject) {\n            this._audioElement.srcObject = srcObject;\n        }\n    }, {\n        key: \"sinkId\",\n        get: function get() {\n            return this._sinkId;\n        }\n    }]);\n\n    return AudioPlayer;\n}(EventTarget_1.default);\n\nexports.default = AudioPlayer;\n/**\n * Use XMLHttpRequest to load the AudioBuffer of a remote audio asset.\n * @private\n * @param context - The AudioContext to use to decode the audio data\n * @param RequestFactory - The XMLHttpRequest factory to build\n * @param src - The URL of the audio asset to load.\n * @returns A Promise containing the decoded AudioBuffer.\n */\n// tslint:disable-next-line:variable-name\nfunction bufferSound(context, RequestFactory, src) {\n    return __awaiter(this, void 0, void 0, /*#__PURE__*/_regenerator2.default.mark(function _callee4() {\n        var request, event;\n        return _regenerator2.default.wrap(function _callee4$(_context4) {\n            while (1) {\n                switch (_context4.prev = _context4.next) {\n                    case 0:\n                        request = new RequestFactory();\n\n                        request.open('GET', src, true);\n                        request.responseType = 'arraybuffer';\n                        _context4.next = 5;\n                        return new Promise(function (resolve) {\n                            request.addEventListener('load', resolve);\n                            request.send();\n                        });\n\n                    case 5:\n                        event = _context4.sent;\n                        _context4.prev = 6;\n                        return _context4.abrupt(\"return\", context.decodeAudioData(event.target.response));\n\n                    case 10:\n                        _context4.prev = 10;\n                        _context4.t0 = _context4[\"catch\"](6);\n                        return _context4.abrupt(\"return\", new Promise(function (resolve) {\n                            context.decodeAudioData(event.target.response, resolve);\n                        }));\n\n                    case 13:\n                    case \"end\":\n                        return _context4.stop();\n                }\n            }\n        }, _callee4, this, [[6, 10]]);\n    }));\n}\n//# sourceMappingURL=AudioPlayer.js.map"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}